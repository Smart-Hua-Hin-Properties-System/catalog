<!doctype html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Property Details | SMART SYSTEM V102.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --bg: #9fb8dc; 
            --card: #ffffff; 
            --primary: #1a5276; 
            --badge-bg: #154360; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏î‡πá‡∏Å‡∏ã‡πå */
            --radius: 35px; 
        }
        body { 
            margin: 0; 
            font-family: 'Kanit', sans-serif; 
            background: var(--bg); 
            overflow-x: hidden; 
            width: 100%;
        }
        .page { 
            padding: 20px; 
            display: flex; 
            justify-content: center; 
            min-height: 100vh;
        }
        .container { 
            width: 100%; 
            max-width: 650px; 
        }
        .card { 
            background: var(--card); 
            border-radius: var(--radius); 
            padding: 30px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.15); 
            margin-top: 15px; 
            position: relative;
            overflow: hidden;
        }
        .btn-back { 
            background: var(--primary); 
            color: #fff; 
            border: none; 
            padding: 10px 25px; 
            border-radius: 50px; 
            cursor: pointer; 
            text-decoration: none; 
            display: inline-flex; 
            align-items: center; 
            gap: 8px;
            font-weight: 500;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* üìç ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏´‡∏±‡∏™ (HP-ID) ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å */
        .badge-hp { 
            position: absolute; 
            top: 25px; 
            left: 25px; 
            background: var(--badge-bg); 
            color: white; 
            padding: 6px 18px; 
            border-radius: 10px; 
            font-size: 0.8rem; 
            font-weight: 600; 
            z-index: 10;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .hero-img { 
            width: 100%; 
            border-radius: 25px; 
            object-fit: cover; 
            margin: 25px 0 20px 0; 
            max-height: 450px; 
            background: #eee; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        }

        /* üìç ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏∏‡πà‡∏° LINE ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å */
        .btn-line-unified { 
            display: flex;
            width: 100%; 
            padding: 14px; 
            background: var(--primary); /* ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å */
            color: white; 
            text-align: center; 
            justify-content: center;
            align-items: center;
            gap: 10px;
            border-radius: 50px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å */
            text-decoration: none; 
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            margin-top: 20px;
        }
        .btn-line-unified:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.2);
        }

        .price-tag { font-size: 2.5rem; font-weight: 900; color: var(--primary); margin-bottom: 20px; }
        .pill { display: inline-flex; align-items: center; gap: 8px; background: #f1f5f9; padding: 10px 20px; border-radius: 50px; font-size: 0.95rem; font-weight: 500; border: 1px solid #e2e8f0; margin: 5px; }
        .overlay { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 9999; }
    </style>
</head>
<body>

<div id="overlay" class="overlay">
    <div style="text-align:center; color:white;">
        <div style="font-size:50px; margin-bottom:15px;"><span>üè†</span><span>‚ú®</span><span>üå¥</span></div>
        <h2 id="msg">FETCHING DETAILS...</h2>
    </div>
</div>

<div class="page">
    <div class="container">
        <a href="index.html" class="btn-back"><i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>

        <div class="card" id="main-content" style="display:none;">
            <div id="d_Badge" class="badge-hp">HP-XXXX</div>

            <h1 id="d_HOUSE_ID" style="color:var(--primary); margin:35px 0 0 0; font-size: 2.2rem; font-weight: 900; text-transform: uppercase;">-</h1>
            <div id="d_Proj" style="color:#888; font-weight:500; font-size: 1.1rem; margin-top: 5px;">-</div>
            
            <img id="d_Img" class="hero-img" src="" alt="Property Image">
            
            <div class="price-tag">‡∏ø <span id="d_Price">-</span></div>
            
            <div style="display: flex; flex-wrap: wrap;">
                <div class="pill"><i class="fas fa-bed"></i> ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô: <b id="d_Bed">-</b></div>
                <div class="pill"><i class="fas fa-bath"></i> ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥: <b id="d_Bath">-</b></div>
                <div class="pill"><i class="fas fa-map-marker-alt"></i> ‡∏ó‡∏≥‡πÄ‡∏•: <b id="d_Loc">-</b></div>
                <div class="pill"><i class="fas fa-check-circle"></i> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <b id="d_Stat">-</b></div>
            </div>

            <a id="lineBtn" class="btn-line-unified" href="#">
                <i class="fab fa-line fa-lg"></i> ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ú‡πà‡∏≤‡∏ô LINE
            </a>
        </div>
    </div>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyS8rGtSnhVS8RdWje7icXZVCw5iBBJoWkEpOYm649OC6FOhnrVi87dD9GsJl_m_FVw/exec";

    async function loadDetail() {
        const hp_id = new URLSearchParams(window.location.search).get('id');
        if (!hp_id) { document.getElementById('msg').innerText = "‚ùå ID MISSING"; return; }

        try {
            const response = await fetch(`${API_URL}?action=getOne&role=PUBLIC&hp_id=${hp_id}`);
            const result = await response.json();

            if (result.success && result.item) {
                const item = result.item;
                document.getElementById('d_Badge').innerText = item.HP_ID;
                document.getElementById('d_HOUSE_ID').innerText = item.HOUSE_ID || item.ID;
                document.getElementById('d_Proj').innerText = item.Project_Name || "-";
                document.getElementById('d_Price').innerText = Number(item.Price || 0).toLocaleString();
                document.getElementById('d_Img').src = item.Thumbnail || "";
                document.getElementById('d_Bed').innerText = item.Bedrooms || "0";
                document.getElementById('d_Bath').innerText = item.Bathrooms || "0";
                document.getElementById('d_Loc').innerText = (item.District || "") + " / " + (item.SubDistrict || "");
                document.getElementById('d_Stat').innerText = item.Status || "Available";

                const shareText = `‡∏™‡∏ô‡πÉ‡∏à‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏´‡∏±‡∏™ ${item.HOUSE_ID} ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ${item.Project_Name}\n‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${window.location.href}`;
                document.getElementById('lineBtn').href = `https://line.me/R/msg/text/?${encodeURIComponent(shareText)}`;

                document.getElementById('overlay').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
            } else {
                document.getElementById('msg').innerText = "‚ùå PROPERTY NOT FOUND";
            }
        } catch (error) {
            document.getElementById('msg').innerText = "‚ùå CONNECTION ERROR";
        }
    }
    window.onload = loadDetail;
</script>
</body>
</html>
