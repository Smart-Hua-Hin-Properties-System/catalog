<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Details | SMART SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background: #9CBCE3; margin: 0; overflow-x: hidden; width: 100%; }
        #loader { height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .detail-card { background: white; width: 92%; max-width: 600px; margin: 20px auto; border-radius: 40px; padding: 25px; display: none; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
    </style>
</head>
<body>

<div id="loader">
    <div style="font-size: 60px;">üè† ‚ú® üå¥</div>
    <h2 id="msg">FETCHING DETAILS...</h2>
</div>

<div id="ui" class="detail-card">
    <button onclick="history.back()" style="background:#1a5276; color:white; border:none; padding:10px 25px; border-radius:50px; cursor:pointer; margin-bottom:20px;">‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    <div id="content"></div>
</div>

<script>
    const api = "https://script.google.com/macros/s/AKfycbzkweiEgczmmU_4FiqRffJ4exvgZl3RwGPIBWXssLgkUpdMArif9-eUEv6yP2Kvtzh1/exec";
    
    async function load() {
        const id = new URLSearchParams(window.location.search).get('id');
        if (!id) { document.getElementById('msg').innerText = "‡∏£‡∏´‡∏±‡∏™‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"; return; }

        try {
            const res = await fetch(`${api}?role=PUBLIC`);
            const data = await res.json();
            const item = data.find(it => it.HP_ID === id); // ‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å HP_ID ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå [cite: 2026-01-27]

            if (item) {
                document.getElementById('loader').style.display = 'none';
                const ui = document.getElementById('ui'); ui.style.display = 'block';
                document.getElementById('content').innerHTML = `
                    <h2 style="color:#1a5276; margin:0;">CODE: ${item.ID}</h2>
                    <p style="color:#888;">${item.Project_Name}</p>
                    <img src="${item.Thumbnail.replace('id=', 'export=view&id=')}" style="width:100%; border-radius:20px; margin:15px 0;">
                    <div style="font-size:1.1rem; line-height:1.8;">
                        <p>üí∞ <b>‡∏£‡∏≤‡∏Ñ‡∏≤:</b> ‡∏ø${Number(item.Price).toLocaleString()}</p>
                        <p>üõå <b>‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô:</b> ${item.Bedrooms}</p>
                        <p>üõÅ <b>‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥:</b> ${item.Bathrooms || '-'}</p>
                        <p>üìç <b>‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á:</b> ${item.District} / ${item.SubDistrict}</p>
                    </div>
                `;
            } else {
                document.getElementById('msg').innerText = "PROPERTY NOT FOUND"; // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠
            }
        } catch (e) { document.getElementById('msg').innerText = "ERROR LOADING DATA"; }
    }
    window.onload = load;
</script>
</body>
</html>
