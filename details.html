<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PREMIUM PROPERTY DETAIL V45.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --primary: #1a4361; /* ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° */
            --gold: #a67c00; /* ‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤ */
            --text-dark: #2c3e50; 
            --text-light: #7f8c8d;
            --bg-light: #f9fbfd;
            --white: #ffffff;
        }
        body { font-family: 'Kanit', sans-serif; background: var(--bg-light); margin: 0; padding-bottom: 90px; color: var(--text-dark); }
        
        /* Headerbar ‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ */
        .header-bar { position: absolute; top: 0; left: 0; right: 0; padding: 20px; z-index: 10; display: flex; align-items: center; }
        .back-btn-circle { background: rgba(255,255,255,0.9); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); color: var(--primary); transition: 0.3s; }
        .back-btn-circle:hover { transform: scale(1.1); background: white; }

        /* Cinematic Hero Image */
        .hero-section { position: relative; height: 50vh; min-height: 400px; }
        .hero-img { width: 100%; height: 100%; object-fit: cover; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.6)); }
        
        .hero-content { position: absolute; bottom: 30px; left: 20px; right: 20px; color: white; }
        .property-price { font-size: 2.2rem; font-weight: 600; margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        .property-title { font-size: 1.2rem; font-weight: 500; opacity: 0.9; }

        /* Main Content Container */
        .container { max-width: 900px; margin: -40px auto 0; padding: 0 20px; position: relative; z-index: 5; }
        .content-card { background: var(--white); border-radius: 25px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }

        /* Key Specs Bar (‡πÅ‡∏ñ‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç) */
        .specs-bar { display: flex; justify-content: space-around; padding: 20px 0; border-bottom: 1px solid #eee; margin-bottom: 25px; }
        .spec-item { text-align: center; }
        .spec-item i { font-size: 1.5rem; color: var(--gold); margin-bottom: 8px; }
        .spec-val { font-weight: 600; font-size: 1.1rem; color: var(--primary); }
        .spec-label { font-size: 0.85rem; color: var(--text-light); }

        /* Section Styling */
        .section-title { font-size: 1.3rem; font-weight: 600; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .description-text { line-height: 1.8; color: var(--text-dark); font-size: 1rem; }

        /* Feature List (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå) */
        .feature-list { list-style: none; padding: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .feature-item { display: flex; align-items: center; gap: 10px; color: var(--text-dark); font-weight: 500; }
        .feature-icon { color: var(--primary); background: #edf2f7; width: 35px; height: 35px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; }

        /* Sticky Contact Footer */
        .sticky-footer { position: fixed; bottom: 0; left: 0; right: 0; background: var(--white); padding: 15px 20px; display: flex; gap: 12px; box-shadow: 0 -5px 25px rgba(0,0,0,0.1); z-index: 100; }
        .btn-contact { flex: 1; padding: 15px; border-radius: 12px; border: none; font-family: 'Kanit'; font-weight: 600; cursor: pointer; text-align: center; color: #fff; text-decoration: none; font-size: 1rem; display: flex; align-items: center; justify-content: center; gap: 8px; transition: 0.3s; }
        .btn-line { background: #06c755; }
        .btn-call { background: var(--primary); }
        .btn-contact:hover { filter: brightness(1.1); transform: translateY(-2px); }

        /* Loading & Error */
        #loading-box { text-align: center; padding: 100px 20px; color: var(--text-light); }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="loading-box">
    <i class="fas fa-circle-notch fa-spin fa-3x" style="color:var(--primary); margin-bottom:20px;"></i>
    <div>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÇ‡∏ä‡∏ß‡πå‡∏£‡∏π‡∏°...</div>
</div>

<div id="main-content" class="hidden">
    <div class="header-bar">
        <div class="back-btn-circle" onclick="history.back()"><i class="fas fa-arrow-left"></i></div>
    </div>

    <div class="hero-section">
        <img id="hero-img" src="https://placehold.co/800x600?text=Loading+Image" class="hero-img">
        <div class="hero-overlay"></div>
        <div class="hero-content">
            <div id="prop-price" class="property-price">‡∏ø0</div>
            <div id="prop-title" class="property-title">Loading ID...</div>
        </div>
    </div>

    <div class="container">
        <div class="content-card">
            <div class="specs-bar">
                <div class="spec-item">
                    <i class="fas fa-bed"></i>
                    <div id="spec-bed" class="spec-val">-</div>
                    <div class="spec-label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</div>
                </div>
                <div class="spec-item">
                    <i class="fas fa-bath"></i>
                    <div id="spec-bath" class="spec-val">-</div>
                    <div class="spec-label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</div>
                </div>
                <div class="spec-item">
                    <i class="fas fa-vector-square"></i>
                    <div id="spec-sqm" class="spec-val">-</div>
                    <div class="spec-label">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢ (‡∏ï‡∏£.‡∏°.)</div>
                </div>
            </div>

            <div style="margin-bottom: 30px;">
                <div class="section-title"><i class="fas fa-align-left"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå</div>
                <div id="prop-desc" class="description-text">
                    ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...
                </div>
            </div>

            <div>
                <div class="section-title"><i class="fas fa-list-check"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</div>
                <ul class="feature-list">
                    <li class="feature-item">
                        <div class="feature-icon"><i class="fas fa-hashtag"></i></div>
                        <span id="feat-id">‡∏£‡∏´‡∏±‡∏™: -</span>
                    </li>
                    <li class="feature-item">
                        <div class="feature-icon"><i class="fas fa-home"></i></div>
                        <span id="feat-type">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: -</span>
                    </li>
                    <li class="feature-item">
                        <div class="feature-icon"><i class="fas fa-map-marker-alt"></i></div>
                        <span id="feat-loc">‡∏ó‡∏≥‡πÄ‡∏•: -</span>
                    </li>
                    <li class="feature-item">
                        <div class="feature-icon"><i class="fas fa-tag"></i></div>
                        <span id="feat-status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: -</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="sticky-footer">
        <a href="https://line.me/ti/p/smart_huahin" class="btn-contact btn-line">
            <i class="fab fa-line fa-lg"></i> ‡∏™‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏Å‡πÑ‡∏•‡∏ô‡πå
        </a>
        <a href="tel:0812345678" class="btn-contact btn-call">
            <i class="fas fa-phone-alt"></i> ‡πÇ‡∏ó‡∏£‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°
        </a>
    </div>
</div>

<script>
    // üîó URL Apps Script ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const webAppUrl = "https://script.google.com/macros/s/AKfycbxUduvVQ2oDjgJT3HJlGDzpbEav1_orj-G2UalilY27QoRtSgNOHPFdw7-NNYPdakA8/exec";

    async function loadDetail() {
        const params = new URLSearchParams(window.location.search);
        const hpId = params.get('id');

        if (!hpId) {
            showError("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå");
            return;
        }

        try {
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏¢‡∏≠‡∏∞ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥ API ‡πÅ‡∏¢‡∏Å‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏ï‡∏±‡∏ß)
            const response = await fetch(webAppUrl);
            const data = await response.json();
            const item = data.find(i => i.HP_ID === hpId);

            if (item) {
                renderPremiumDetail(item);
            } else {
                showError("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö");
            }
        } catch (error) {
            showError("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå");
        }
    }

    function renderPremiumDetail(item) {
        document.getElementById('loading-box').classList.add('hidden');
        document.getElementById('main-content').classList.remove('hidden');

        // Hero Section
        document.getElementById('hero-img').src = item.Thumbnail || 'https://placehold.co/800x600?text=No+Image';
        document.getElementById('prop-price').innerText = `‡∏ø${Number(item.Price).toLocaleString()}`;
        document.getElementById('prop-title').innerText = `${item.Project_Name || ''} | ${item.HP_ID}`;

        // Specs Bar
        document.getElementById('spec-bed').innerText = item.Bedrooms || '-';
        document.getElementById('spec-bath').innerText = item.Bathrooms || '-';
        document.getElementById('spec-sqm').innerText = item["Living Area (sq.m)"] || '-';

        // Description
        document.getElementById('prop-desc').innerText = item.Description_TH || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°';

        // Features
        document.getElementById('feat-id').innerText = `‡∏£‡∏´‡∏±‡∏™: ${item.HP_ID} | ${item.ID}`;
        document.getElementById('feat-type').innerText = `‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: ${item.Property_Type || '-'}`;
        document.getElementById('feat-loc').innerText = `‡∏ó‡∏≥‡πÄ‡∏•: ${item.District}, ${item.Sub_District}`;
        document.getElementById('feat-status').innerHTML = `‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span style="color:${item.Status === 'Available' ? '#27ae60' : '#c0392b'}">${item.Status}</span>`;
    }

    function showError(msg) {
        document.getElementById('loading-box').innerHTML = `<i class="fas fa-exclamation-circle fa-3x" style="color:#c0392b;"></i><br><br>${msg}`;
    }

    window.onload = loadDetail;
</script>
</body>
</html>
