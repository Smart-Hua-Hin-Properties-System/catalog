<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Details - Smart System</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1a5276; --bg: #f4f7f6; --text: #2c3e50; --white: #ffffff; --green: #27ae60; }
        body { font-family: 'Kanit', sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: var(--text); line-height: 1.6; }
        .container { max-width: 600px; margin: 0 auto; background: var(--white); min-height: 100vh; padding-bottom: 120px; box-shadow: 0 0 30px rgba(0,0,0,0.1); }
        .back-nav { padding: 15px; background: #fff; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #eee; display: flex; align-items: center; }
        .back-btn { text-decoration: none; color: var(--primary); font-weight: 600; display: flex; align-items: center; gap: 8px; font-size: 1.1rem; }
        .main-img { width: 100%; height: 380px; object-fit: cover; background: #ececec; }
        .content { padding: 25px; }
        .badge-status { display: inline-flex; gap: 8px; margin-bottom: 10px; }
        .badge { background: #f1c40f; color: #000; padding: 4px 12px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; }
        .status { background: var(--green); color: white; padding: 4px 12px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; }
        .price-box { font-size: 2.6rem; color: var(--primary); font-weight: 600; margin: 10px 0 20px 0; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px; }
        
        /* üöÄ 19 Attributes Grid */
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .info-item { display: flex; align-items: center; gap: 12px; padding: 12px; background: #f8f9fa; border-radius: 12px; border: 1px solid #edf2f7; }
        .info-item i { font-size: 1.1rem; color: var(--primary); width: 22px; text-align: center; }
        .info-label { color: #7f8c8d; font-size: 0.8rem; display: block; line-height: 1.2; }
        .info-value { font-weight: 600; font-size: 1rem; color: var(--text); }
        .full-width { grid-column: 1 / -1; }

        .desc-box { margin-top: 25px; padding: 20px; background: #fff9f0; border-radius: 15px; border: 1px solid #ffeeba; }
        .share-bar { display: flex; gap: 12px; overflow-x: auto; padding: 10px 25px 30px; justify-content: flex-start; scrollbar-width: none; }
        .share-bar::-webkit-scrollbar { display: none; }
        .share-btn { width: 50px; height: 50px; border-radius: 50%; border: none; background: #fff; flex-shrink: 0; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .share-btn img { width: 26px; height: 26px; }

        .footer-action { position: fixed; bottom: 0; width: 100%; max-width: 600px; background: #fff; padding: 18px; box-sizing: border-box; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 1000; }
        .btn-line { display: flex; align-items: center; justify-content: center; gap: 10px; background: #00b900; color: #fff; text-align: center; padding: 16px; border-radius: 15px; text-decoration: none; font-weight: 600; font-size: 1.2rem; }
    </style>
</head>
<body>
<div class="container" id="detailsWrapper">
    <div style="text-align:center; padding:150px 20px; color:var(--primary);">
        <i class="fas fa-spinner fa-spin fa-2x"></i><br><br>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Smart System 19 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...
    </div>
</div>

<script>
    const api = "https://script.google.com/macros/s/AKfycbytY48pBly91AAPJ4I6oy7QtuS451d-U5EKBvIwtobMQrty2Q3zsUw6P9LI3zm7Z4E7/exec";
    const pId = new URLSearchParams(window.location.search).get('id');

    async function load() {
        try {
            const r = await fetch(api);
            const d = await r.json();
            const it = d.find(x => x.HP_ID === pId);
            if(it) render(it);
        } catch(e) { document.getElementById('detailsWrapper').innerHTML = "‚ùå ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß"; }
    }

    function render(it) {
        const wrap = document.getElementById('detailsWrapper');
        const fP = Number(it.Price).toLocaleString();
        
        wrap.innerHTML = `
            <div class="back-nav"><a href="javascript:history.back()" class="back-btn"><i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å</a></div>
            <img src="${it.Thumbnail}" class="main-img" onerror="this.src='https://placehold.co/600x400?text=Smart+Hua+Hin+Properties'">
            
            <div class="content">
                <div class="badge-status">
                    ${it.Badge ? `<span class="badge">${it.Badge}</span>` : ''}
                    ${it.Status ? `<span class="status">${it.Status}</span>` : ''}
                </div>
                <h1 style="margin:0; font-size:1.9rem; color:var(--primary);">${it.Project_Name}</h1>
                <p style="color:#7f8c8d; margin:5px 0 20px 0;">‡∏£‡∏´‡∏±‡∏™: ${it.HP_ID} | ‡∏¢‡∏π‡∏ô‡∏¥‡∏ï: ${it.ID}</p>
                <div class="price-box">‡∏ø${fP}</div>

                <div class="info-grid">
                    <div class="info-item"><i class="fas fa-th-large"></i><div><span class="info-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</span><span class="info-value">${it.Type || '-'}</span></div></div>
                    <div class="info-item"><i class="fas fa-map-marker-alt"></i><div><span class="info-label">‡πÅ‡∏õ‡∏•‡∏á (Plot)</span><span class="info-value">${it.Plot || '-'}</span></div></div>
                    <div class="info-item"><i class="fas fa-bed"></i><div><span class="info-label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</span><span class="info-value">${it.Bedrooms || '0'} ‡∏´‡πâ‡∏≠‡∏á</span></div></div>
                    <div class="info-item"><i class="fas fa-bath"></i><div><span class="info-label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</span><span class="info-value">${it.Bathrooms || '0'} ‡∏´‡πâ‡∏≠‡∏á</span></div></div>
                    
                    <div class="info-item"><i class="fas fa-vector-square"></i><div><span class="info-label">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢</span><span class="info-value">${it['Living Area (sq.m)'] || '0'} ‡∏ï‡∏£.‡∏°.</span></div></div>
                    <div class="info-item"><i class="fas fa-expand-alt"></i><div><span class="info-label">‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô (‡∏ï‡∏£.‡∏ß.)</span><span class="info-value">${it['Land Area (sq.w)'] || '0'} ‡∏ï‡∏£.‡∏ß.</span></div></div>
                    <div class="info-item"><i class="fas fa-ruler-combined"></i><div><span class="info-label">‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô (‡∏ï‡∏£.‡∏°.)</span><span class="info-value">${it['Land Area (sq.m)'] || '0'} ‡∏ï‡∏£.‡∏°.</span></div></div>
                    <div class="info-item"><i class="fas fa-car"></i><div><span class="info-label">‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ</span><span class="info-value">${it.Parking || '-'} ‡∏Ñ‡∏±‡∏ô</span></div></div>

                    <div class="info-item"><i class="fas fa-swimming-pool"></i><div><span class="info-label">‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏£‡∏∞</span><span class="info-value">${it['Pool Size'] || '-'}</span></div></div>
                    <div class="info-item"><i class="fas fa-water"></i><div><span class="info-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏™‡∏£‡∏∞</span><span class="info-value">${it['Pool Depth'] || '-'}</span></div></div>

                    <div class="info-item"><i class="fas fa-couch"></i><div><span class="info-label">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</span><span class="info-value">${it.Furnishing || '-'}</span></div></div>
                    <div class="info-item"><i class="fas fa-bolt"></i><div><span class="info-label">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</span><span class="info-value">${it.Electricity || '-'}</span></div></div>
                    
                    <div class="info-item"><i class="fas fa-city"></i><div><span class="info-label">‡∏ï‡∏≥‡∏ö‡∏• (SubDistrict)</span><span class="info-value">${it.SubDistrict || '-'}</span></div></div>
                    <div class="info-item"><i class="fas fa-map"></i><div><span class="info-label">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ (District)</span><span class="info-value">${it.District || '-'}</span></div></div>

                    <div class="info-item full-width"><i class="fas fa-star"></i><div><span class="info-label">‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏°/‡∏û‡∏¥‡πÄ‡∏®‡∏© (Extras)</span><span class="info-value">${it.Extras || '-'}</span></div></div>
                </div>

                <div class="desc-box">
                    <b style="color:var(--primary);"><i class="fas fa-file-alt"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</b>
                    <p style="margin:10px 0 0 0; color:#444;">${it.Description || '‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà'}</p>
                </div>
            </div>

            <div style="text-align:center; padding:20px 0; border-top:1px dashed #ddd;">
                <p style="font-weight:600; color:#7f8c8d; margin-bottom:15px;">‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</p>
                <div class="share-bar">
                    <button class="share-btn" onclick="window.open('https://line.me/R/msg/text/?üè° ${it.Project_Name}\\nüí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ø${fP}\\nüîó ${window.location.href}')"><img src="https://upload.wikimedia.org/wikipedia/commons/4/41/LINE_logo.svg"></button>
                    <button class="share-btn" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}')"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png"></button>
                    <button class="share-btn" onclick="navigator.clipboard.writeText(window.location.href);alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡πâ‡∏ß')"><img src="https://cdn-icons-png.flaticon.com/512/1621/1621635.png"></button>
                </div>
            </div>

            <div class="footer-action">
                <a href="https://line.me/R/msg/text/?‡∏™‡∏ô‡πÉ‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏´‡∏±‡∏™: ${it.HP_ID} ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ${it.Project_Name}" class="btn-line">
                    <i class="fab fa-line" style="font-size:1.5rem;"></i> ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô LINE
                </a>
            </div>
        `;
    }
    load();
</script>
</body>
</html>

