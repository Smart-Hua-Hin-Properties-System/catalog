<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Details | SMART SYSTEM</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background: #9CBCE3; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; }
        #loader { text-align: center; color: white; }
        .detail-box { background: white; width: 90%; max-width: 800px; border-radius: 40px; padding: 30px; display: none; }
    </style>
</head>
<body>

<div id="loader">
    <div style="font-size: 50px;">üè† ‚ú® üå¥</div>
    <h2 id="msg">FETCHING DETAILS...</h2>
</div>

<div id="detail-ui" class="detail-box">
    <button onclick="history.back()" style="background:#1a5276; color:white; border:none; padding:10px 20px; border-radius:20px; cursor:pointer;">‚¨ÖÔ∏è BACK</button>
    <h1 id="d_ID" style="color:#1a5276; margin-top:20px;"></h1>
    <img id="d_Img" style="width:100%; border-radius:20px; margin-bottom:20px;">
    <div id="d_Content" style="font-size:1.1rem; line-height:1.6;"></div>
</div>

<script>
    const api = "https://script.google.com/macros/s/AKfycbzkweiEgczmmU_4FiqRffJ4exvgZl3RwGPIBWXssLgkUpdMArif9-eUEv6yP2Kvtzh1/exec";
    const lang = localStorage.getItem('smartLang') || 'th';

    async function loadDetail() {
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id'); // ‡∏î‡∏∂‡∏á HP_ID ‡∏à‡∏≤‡∏Å URL [cite: 2026-01-27]

        if (!id) { document.getElementById('msg').innerText = "ID NOT FOUND"; return; }

        try {
            const res = await fetch(`${api}?role=PUBLIC`);
            const data = await res.json();
            const item = data.find(it => it.HP_ID === id);

            if (item) {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('detail-ui').style.display = 'block';
                document.getElementById('d_ID').innerText = "CODE: " + item.ID;
                document.getElementById('d_Img').src = item.Thumbnail.replace('id=', 'export=view&id=');
                document.getElementById('d_Content').innerHTML = `
                    <p><b>‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£:</b> ${item.Project_Name}</p>
                    <p><b>‡∏£‡∏≤‡∏Ñ‡∏≤:</b> ‡∏ø${Number(item.Price).toLocaleString()}</p>
                    <p><b>‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô:</b> ${item.Bedrooms}</p>
                    <p><b>‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà:</b> ${item.District} / ${item.SubDistrict}</p>
                `;
            } else {
                document.getElementById('msg').innerText = "PROPERTY NOT FOUND";
            }
        } catch (e) { document.getElementById('msg').innerText = "ERROR LOADING DATA"; }
    }
    window.onload = loadDetail;
</script>
</body>
</html>
