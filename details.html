<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Details - Smart System</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1a5276; --bg: #f4f7f6; --text: #2c3e50; --white: #ffffff; }
        body { font-family: 'Kanit', sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: var(--text); }
        .container { max-width: 600px; margin: 0 auto; background: var(--white); min-height: 100vh; padding-bottom: 120px; box-shadow: 0 0 30px rgba(0,0,0,0.1); }
        .back-nav { padding: 15px; background: #fff; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #eee; }
        .back-btn { text-decoration: none; color: var(--primary); font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .main-img { width: 100%; height: 380px; object-fit: cover; background: #ececec; }
        .content { padding: 25px; }
        .badge-tag { display: inline-block; background: #f1c40f; color: #000; padding: 4px 12px; border-radius: 4px; font-size: 0.85rem; font-weight: 600; margin-bottom: 10px; }
        .status-tag { display: inline-block; background: #27ae60; color: #fff; padding: 4px 12px; border-radius: 4px; font-size: 0.85rem; margin-left: 5px; }
        .price-box { font-size: 2.5rem; color: var(--primary); font-weight: 600; margin: 15px 0; border-bottom: 2px solid #f0f0f0; padding-bottom: 15px; }
        
        /* Full Detail Grid */
        .detail-grid { display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 20px; }
        .detail-item { display: flex; align-items: center; gap: 15px; padding: 15px; background: #f8f9fa; border-radius: 12px; border-left: 5px solid var(--primary); }
        .detail-item i { font-size: 1.3rem; color: var(--primary); width: 30px; text-align: center; }
        .label { color: #7f8c8d; font-size: 0.9rem; display: block; }
        .value { font-weight: 600; font-size: 1.1rem; }

        .desc-section { margin-top: 30px; padding: 20px; background: #fff9f0; border-radius: 12px; border: 1px solid #ffeeba; }
        .footer-action { position: fixed; bottom: 0; width: 100%; max-width: 600px; background: #fff; padding: 20px; box-sizing: border-box; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 1000; }
        .btn-line { display: flex; align-items: center; justify-content: center; gap: 10px; background: #00b900; color: #fff; text-align: center; padding: 16px; border-radius: 15px; text-decoration: none; font-weight: 600; font-size: 1.2rem; }
    </style>
</head>
<body>
<div class="container" id="mainWrapper">
    <div id="loader" style="text-align:center; padding:150px 20px;">üì° ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°...</div>
</div>

<script>
    const api = "https://script.google.com/macros/s/AKfycbyUMPlMZfqtoWVikxCV_XECQHmimWg4hXo1PRFb2SfMEINvwOOADJZHeQ-MDNCBBbBV/exec";
    const pId = new URLSearchParams(window.location.search).get('id');

    async function load() {
        try {
            const r = await fetch(api);
            const d = await r.json();
            const it = d.find(x => x.HP_ID === pId);
            if(it) render(it);
        } catch(e) { document.getElementById('loader').innerText = "‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"; }
    }

    function render(it) {
        const wrap = document.getElementById('mainWrapper');
        const fP = Number(it.Price).toLocaleString();

        wrap.innerHTML = `
            <div class="back-nav"><a href="javascript:history.back()" class="back-btn"><i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Ñ‡∏ï‡∏ï‡∏≤‡∏•‡πá‡∏≠‡∏Å</a></div>
            <img src="${it.Thumbnail}" class="main-img" onerror="this.src='https://placehold.co/600x400?text=Smart+Hua+Hin+Properties'">
            <div class="content">
                <div>
                    ${it.Badge ? `<span class="badge-tag"><i class="fas fa-award"></i> ${it.Badge}</span>` : ''}
                    ${it.Status ? `<span class="status-tag">${it.Status}</span>` : ''}
                </div>
                <h1 style="margin:5px 0; font-size:1.8rem; color:var(--primary);">${it.Project_Name} (‡πÅ‡∏õ‡∏•‡∏á ${it.Plot || '-'})</h1>
                <p style="color:#7f8c8d; margin-bottom:20px;">‡∏£‡∏´‡∏±‡∏™‡∏£‡∏∞‡∏ö‡∏ö: <b>${it.HP_ID}</b> | ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: <b>${it.Type || '-'}</b></p>
                <div class="price-box">‡∏ø${fP}</div>
                
                <div class="detail-grid">
                    <div class="detail-item"><i class="fas fa-map-pin"></i><div><span class="label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÅ‡∏õ‡∏•‡∏á</span><span class="value">${it.Plot || '-'}</span></div></div>
                    <div class="detail-item"><i class="fas fa-bed"></i><div><span class="label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</span><span class="value">${it.Bedrooms || '0'} ‡∏´‡πâ‡∏≠‡∏á</span></div></div>
                    <div class="detail-item"><i class="fas fa-bath"></i><div><span class="label">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥</span><span class="value">${it.Bathrooms || '0'} ‡∏´‡πâ‡∏≠‡∏á</span></div></div>
                    <div class="detail-item"><i class="fas fa-vector-square"></i><div><span class="label">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≠‡∏¢ (sq.m)</span><span class="value">${it['Living Area (sq.m)'] || '0'} ‡∏ï‡∏£.‡∏°.</span></div></div>
                    <div class="detail-item"><i class="fas fa-maximize"></i><div><span class="label">‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô (sq.w / sq.m)</span><span class="value">${it['Land Area (sq.w)'] || '0'} ‡∏ï‡∏£.‡∏ß. / ${it['Land Area (sq.m)'] || '0'} ‡∏ï‡∏£.‡∏°.</span></div></div>
                    <div class="detail-item"><i class="fas fa-person-swimming"></i><div><span class="label">‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ (‡∏Ç‡∏ô‡∏≤‡∏î / ‡∏•‡∏∂‡∏Å)</span><span class="value">${it['Pool Size'] || '-'} / ‡∏•‡∏∂‡∏Å ${it['Pool Depth'] || '-'} ‡∏°.</span></div></div>
                    <div class="detail-item"><i class="fas fa-couch"></i><div><span class="label">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</span><span class="value">${it.Furnishing || '-'}</span></div></div>
                    <div class="detail-item"><i class="fas fa-car"></i><div><span class="label">‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏î‡∏£‡∏ñ</span><span class="value">${it.Parking || '-'} ‡∏Ñ‡∏±‡∏ô</span></div></div>
                    <div class="detail-item"><i class="fas fa-bolt"></i><div><span class="label">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏ü‡πâ‡∏≤</span><span class="value">${it.Electricity || '-'}</span></div></div>
                    <div class="detail-item"><i class="fas fa-location-dot"></i><div><span class="label">‡∏ó‡∏≥‡πÄ‡∏•</span><span class="value">${it.SubDistrict}, ${it.District}</span></div></div>
                    <div class="detail-item"><i class="fas fa-plus-circle"></i><div><span class="label">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏û‡∏¥‡πÄ‡∏®‡∏© / ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏°</span><span class="value">${it.Extras || '-'}</span></div></div>
                </div>

                <div class="desc-section">
                    <b style="color:var(--primary);"><i class="fas fa-info-circle"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å:</b>
                    <p style="margin:10px 0 0 0; line-height:1.6;">${it.Description || '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°'}</p>
                </div>
            </div>
            
            <div class="footer-action">
                <a href="https://line.me/R/msg/text/?‡∏™‡∏ô‡πÉ‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏´‡∏±‡∏™: ${it.HP_ID} ‡πÅ‡∏õ‡∏•‡∏á ${it.Plot}" class="btn-line">
                    <i class="fab fa-line"></i> ‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô LINE
                </a>
            </div>
        `;
    }
    load();
</script>
</body>
</html>
