<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART PROPERTY | DETAIL</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1a5276; --white: #ffffff; --bg: #f8fafb; }
        body { font-family: 'Kanit', sans-serif; background: var(--bg); margin: 0; padding-bottom: 80px; }
        header { background: #fff; padding: 15px; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .back-btn { cursor: pointer; color: var(--primary); font-size: 1.2rem; }
        .hero-img { width: 100%; height: 350px; object-fit: cover; }
        .content { padding: 20px; max-width: 800px; margin: 0 auto; background: #fff; border-radius: 30px; margin-top: -30px; position: relative; box-shadow: 0 -10px 30px rgba(0,0,0,0.05); }
        .price { color: var(--primary); font-size: 2rem; font-weight: 600; margin-bottom: 10px; }
        .details-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; border-top: 1px solid #eee; padding-top: 20px; text-align: center; }
        .info-box i { color: var(--primary); font-size: 1.2rem; margin-bottom: 5px; }
        .table-info { width: 100%; border-collapse: collapse; margin-top: 20px; }
        .table-info td { padding: 12px; border-bottom: 1px solid #eee; font-size: 0.95rem; }
        .sticky-footer { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; padding: 15px; display: flex; gap: 10px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); }
        .btn { flex: 1; padding: 15px; border-radius: 50px; border: none; font-family: 'Kanit'; font-weight: 600; cursor: pointer; text-align: center; color: #fff; text-decoration: none; }
    </style>
</head>
<body>

<header>
    <div class="back-btn" onclick="history.back()"><i class="fas fa-chevron-left"></i> BACK</div>
    <div style="font-weight:600; color:var(--primary);">Property Detail</div>
</header>

<div id="detail-content">
    <p style="text-align:center; padding:50px;">กำลังโหลดข้อมูลบ้าน...</p>
</div>

<div class="sticky-footer">
    <a href="https://line.me/ti/p/smart_huahin" class="btn" style="background:#06c755;"><i class="fab fa-line"></i> LINE US</a>
    <a href="tel:0812345678" class="btn" style="background:var(--primary);"><i class="fas fa-phone"></i> CALL NOW</a>
</div>

<script>
    const webAppUrl = "https://script.google.com/macros/s/AKfycbxUduvVQ2oDjgJT3HJlGDzpbEav1_orj-G2UalilY27QoRtSgNOHPFdw7-NNYPdakA8/exec";

    async function loadDetail() {
        const params = new URLSearchParams(window.location.search);
        const hpId = params.get('id');

        try {
            const response = await fetch(webAppUrl);
            const data = await response.json();
            const item = data.find(i => i.HP_ID === hpId);

            if (item) {
                renderDetail(item);
            } else {
                document.getElementById('detail-content').innerHTML = "<p style='text-align:center;'>ไม่พบข้อมูลบ้าน</p>";
            }
        } catch (error) {
            console.error(error);
        }
    }

    function renderDetail(item) {
        const container = document.getElementById('detail-content');
        container.innerHTML = `
            <img src="${item.Thumbnail || 'https://placehold.co/800x600?text=Property+Image'}" class="hero-img">
            <div class="content">
                <div class="price">฿${Number(item.Price).toLocaleString()}</div>
                <h2 style="margin:0;">${item.ID} | ${item.HP_ID}</h2>
                <p style="color:#777;"><i class="fas fa-map-marker-alt"></i> ${item.District}, ${item.Sub_District}</p>
                
                <div class="details-grid">
                    <div class="info-box"><i class="fas fa-bed"></i><br><small>${item.Bedrooms || 0} Beds</small></div>
                    <div class="info-box"><i class="fas fa-bath"></i><br><small>${item.Bathrooms || 0} Baths</small></div>
                    <div class="info-box"><i class="fas fa-vector-square"></i><br><small>${item["Living Area (sq.m)"] || 0} sqm</small></div>
                </div>

                <table class="table-info">
                    <tr><td><strong>Property Type:</strong></td><td>${item.Property_Type}</td></tr>
                    <tr><td><strong>District:</strong></td><td>${item.District}</td></tr>
                    <tr><td><strong>Status:</strong></td><td>${item.Status}</td></tr>
                </table>

                <div style="margin-top:20px; color:#555; line-height:1.6;">
                    <strong>Description:</strong><br>
                    ${item.Description_TH || 'บ้านหรูทำเลดี พร้อมสิ่งอำนวยความสะดวกครบครัน ในโครงการคุณภาพ'}
                </div>
            </div>
        `;
    }

    window.onload = loadDetail;
</script>
</body>
</html>
